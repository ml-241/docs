---
title: Batch Requests
subtitle: Document how to handle multiple JSON-RPC calls in a single request
---

Batch requests in JSON-RPC allow clients to send multiple method calls in a single HTTP request, improving efficiency and reducing network overhead. OpenRPC supports documenting batch request capabilities.

## Batch request structure

While individual methods are documented separately, batch requests combine multiple calls:

```json title="Batch Request Example"
[
  {
    "jsonrpc": "2.0",
    "method": "user.get",
    "params": { "id": "user_123" },
    "id": 1
  },
  {
    "jsonrpc": "2.0",
    "method": "order.list",
    "params": { "userId": "user_123", "limit": 10 },
    "id": 2
  },
  {
    "jsonrpc": "2.0",
    "method": "analytics.track",
    "params": {
      "event": {
        "userId": "user_123",
        "eventType": "api_call",
        "properties": { "endpoint": "batch_request" }
      }
    }
  }
]
```

## Documenting batch-capable methods

Mark methods that work well in batch scenarios:

```yml title="openrpc.yml" {4-5, 14-15}
methods:
  - name: user.get
    summary: Get user by ID
    x-fern-batch-compatible: true
    x-fern-batch-description: "Efficiently retrieve multiple users in a single batch"
    params:
      - name: id
        schema:
          type: string
        required: true
    result:
      name: user
      schema:
        $ref: '#/components/schemas/User'
  - name: product.get
    summary: Get product by ID
    x-fern-batch-compatible: true
    x-fern-batch-description: "Retrieve multiple products with a single request"
    params:
      - name: id
        schema:
          type: string
        required: true
    result:
      name: product
      schema:
        $ref: '#/components/schemas/Product'
```

## Batch response handling

Document how batch responses are structured:

```yml title="openrpc.yml" {6-12}
info:
  title: E-commerce API
  version: 1.0.0
  description: |
    This API supports JSON-RPC batch requests for improved performance.
    
    Batch responses maintain the same order as requests and include:
    - Successful results with matching request IDs
    - Error responses for failed calls
    - No response for notification calls (calls without IDs)
    
    Example batch response:
    ```json
    [
      {
        "jsonrpc": "2.0",
        "result": { "id": "user_123", "name": "John Doe" },
        "id": 1
      },
      {
        "jsonrpc": "2.0",
        "result": [{ "id": "order_456", "total": 99.99 }],
        "id": 2
      }
    ]
    ```
```

## Mixed batch requests

Document scenarios with regular methods and notifications:

```yml title="openrpc.yml" {2-23}
methods:
  - name: order.create
    summary: Create a new order
    description: Can be used in batch requests with order.calculate for atomic operations
    x-fern-batch-compatible: true
    params:
      - name: orderData
        schema:
          $ref: '#/components/schemas/CreateOrderRequest'
        required: true
    result:
      name: order
      schema:
        $ref: '#/components/schemas/Order'
  - name: order.calculate
    summary: Calculate order totals
    description: Often used before order.create in batch requests
    x-fern-batch-compatible: true
    params:
      - name: items
        schema:
          type: array
          items:
            $ref: '#/components/schemas/OrderItem'
        required: true
    result:
      name: calculation
      schema:
        $ref: '#/components/schemas/OrderCalculation'
    examples:
      - name: BatchOrderProcessing
        description: Calculate and create order in a single batch
        params:
          items:
            - productId: "prod_123"
              quantity: 2
              price: 29.99
            - productId: "prod_456"
              quantity: 1
              price: 15.50
        result:
          subtotal: 75.48
          tax: 6.04
          shipping: 5.99
          total: 87.51
```

## Error handling in batches

Document how errors are handled in batch scenarios:

```yml title="openrpc.yml" {6-15}
info:
  title: API Documentation
  version: 1.0.0
  description: |
    ## Batch Error Handling
    
    When processing batch requests:
    - Each call is processed independently
    - Successful calls return normal results
    - Failed calls return error objects
    - Notifications (calls without ID) produce no response
    - Partial failures are allowed - some calls can succeed while others fail
    
    Error response example:
    ```json
    {
      "jsonrpc": "2.0",
      "error": {
        "code": -32602,
        "message": "Invalid params",
        "data": { "field": "email", "error": "Invalid email format" }
      },
      "id": 3
    }
    ```
```

## Batch optimization methods

Document methods specifically designed for batch operations:

```yml title="openrpc.yml" {2-19}
methods:
  - name: users.getBatch
    summary: Get multiple users by IDs
    description: Optimized method for retrieving multiple users in a single call
    params:
      - name: userIds
        schema:
          type: array
          items:
            type: string
          maxItems: 100
          minItems: 1
        required: true
        description: Array of user IDs to retrieve (max 100)
    result:
      name: users
      schema:
        type: object
        properties:
          users:
            type: array
            items:
              $ref: '#/components/schemas/User'
          notFound:
            type: array
            items:
              type: string
            description: IDs that were not found
        required:
          - users
          - notFound
    examples:
      - name: GetMultipleUsers
        description: Retrieve several users at once
        params:
          userIds: ["user_123", "user_456", "user_789"]
        result:
          users:
            - id: "user_123"
              name: "John Doe"
              email: "john@example.com"
            - id: "user_456"
              name: "Jane Smith"
              email: "jane@example.com"
          notFound: ["user_789"]
```

## Batch size limitations

Document batch request limits and recommendations:

```yml title="openrpc.yml" {4-8}
info:
  title: API with Batch Support
  version: 1.0.0
  x-fern-batch-limits:
    maxBatchSize: 50
    maxPayloadSize: "1MB"
    timeoutSeconds: 30
    description: "Batch requests are limited to 50 operations or 1MB payload size"
  description: |
    ## Batch Request Guidelines
    
    - Maximum 50 operations per batch request
    - Total payload size limited to 1MB
    - Batch processing timeout: 30 seconds
    - Use batch requests for:
      - Retrieving related data in a single round-trip
      - Performing multiple updates atomically
      - Reducing network overhead for mobile applications
    
    - Avoid batch requests for:
      - Long-running operations (use individual calls)
      - Operations that don't benefit from batching
      - Calls that might exceed timeout limits
```

## SDK batch support

Configure how SDKs handle batch requests:

```yml title="openrpc.yml" {5-8}
components:
  x-fern-batch-config:
    enableBatchMethods: true
    generateBatchHelpers: true
    batchMethodNaming: "batch{MethodName}"
    maxBatchSize: 50
```

This configuration would generate SDK methods like:

```typescript
// Individual calls
const user = await client.user.get({ id: "user_123" });
const product = await client.product.get({ id: "prod_456" });

// Batch call
const results = await client.batch([
  { method: "user.get", params: { id: "user_123" } },
  { method: "product.get", params: { id: "prod_456" } },
  { method: "analytics.track", params: { event: {...} } } // notification
]);
```

Batch requests are essential for high-performance applications that need to minimize network round-trips while maintaining the flexibility of individual method calls. 